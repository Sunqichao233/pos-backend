# POSç³»ç»Ÿæ•°æ®åº“E-Rå›¾è®¾è®¡

## è®¾è®¡æ¦‚è¿°

åŸºäºDashboardåå°ç®¡ç†éœ€æ±‚ï¼Œé‡‡ç”¨Montyé£æ ¼çš„æ•°æ®åº“è®¾è®¡ç†å¿µï¼Œä»¥æ•°æ®å®Œæ•´æ€§ä¸ºæ ¸å¿ƒï¼Œå…¼é¡¾æŸ¥è¯¢æ€§èƒ½çš„å¤šç§Ÿæˆ·POSç³»ç»Ÿæ•°æ®æ¨¡å‹ã€‚

## E-Rå›¾

```
                    POS System Database E-R Diagram

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              ç§Ÿæˆ·ä¸ç”¨æˆ·ç®¡ç†                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    Store (åº—é“º)                    User (ç”¨æˆ·/å‘˜å·¥)               Role (è§’è‰²)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ store_id (PK)   â”‚â”€â”€â”€â”€â”€1:Nâ”€â”€â”€â”€â”€â”‚ user_id (PK)    â”‚â”€â”€N:Mâ”€â”€â”€â”€â”€â”‚ role_id (PK)    â”‚
â”‚ store_name      â”‚              â”‚ store_id (FK)   â”‚           â”‚ role_name       â”‚
â”‚ address         â”‚              â”‚ email           â”‚           â”‚ role_code       â”‚
â”‚ phone           â”‚              â”‚ password_hash   â”‚           â”‚ description     â”‚
â”‚ tax_rate        â”‚              â”‚ first_name      â”‚           â”‚ is_active       â”‚
â”‚ currency        â”‚              â”‚ last_name       â”‚           â”‚ created_at      â”‚
â”‚ timezone        â”‚              â”‚ status          â”‚           â”‚ updated_at      â”‚
â”‚ business_hours  â”‚              â”‚ salary          â”‚           â”‚ created_by      â”‚
â”‚ created_at      â”‚              â”‚ hire_date       â”‚           â”‚ updated_by      â”‚
â”‚ updated_at      â”‚              â”‚ created_at      â”‚           â”‚ is_deleted      â”‚
â”‚ created_by      â”‚              â”‚ updated_at      â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ updated_by      â”‚              â”‚ created_by      â”‚
â”‚ is_active       â”‚              â”‚ updated_by      â”‚           Permission (æƒé™)
â”‚ is_deleted      â”‚              â”‚ last_login_at   â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚ is_deleted      â”‚           â”‚ permission_id(PK)â”‚
                                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚ permission_name â”‚
                                                               â”‚ permission_code â”‚
    UserRole (ç”¨æˆ·è§’è‰²å…³è”)                                     â”‚ resource        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                           â”‚ action          â”‚
â”‚ user_id (FK)    â”‚                                           â”‚ description     â”‚
â”‚ role_id (FK)    â”‚                                           â”‚ created_at      â”‚
â”‚ assigned_at     â”‚              RolePermission (è§’è‰²æƒé™å…³è”) â”‚ updated_at      â”‚
â”‚ assigned_by     â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚ created_by      â”‚
â”‚ is_active       â”‚              â”‚ role_id (FK)    â”‚           â”‚ updated_by      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚ permission_id(FK)â”‚          â”‚ is_deleted      â”‚
                                 â”‚ granted_at      â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚ granted_by      â”‚
                                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              å•†å“ä¸åº“å­˜ç®¡ç†                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    Category (åˆ†ç±»)                Product (å•†å“)               Inventory (åº“å­˜)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ category_id(PK) â”‚â”€â”€â”€â”€â”€1:Nâ”€â”€â”€â”€â”€â”‚ product_id (PK) â”‚â”€â”€1:1â”€â”€â”€â”€â”€â”‚ inventory_id(PK)â”‚
â”‚ store_id (FK)   â”‚              â”‚ store_id (FK)   â”‚           â”‚ product_id (FK) â”‚
â”‚ category_name   â”‚              â”‚ category_id(FK) â”‚           â”‚ current_stock   â”‚
â”‚ description     â”‚              â”‚ product_name    â”‚           â”‚ min_stock       â”‚
â”‚ display_order   â”‚              â”‚ description     â”‚           â”‚ max_stock       â”‚
â”‚ is_active       â”‚              â”‚ price           â”‚           â”‚ cost_price      â”‚
â”‚ created_at      â”‚              â”‚ image_url       â”‚           â”‚ last_updated    â”‚
â”‚ updated_at      â”‚              â”‚ is_active       â”‚           â”‚ created_at      â”‚
â”‚ created_by      â”‚              â”‚ created_at      â”‚           â”‚ updated_at      â”‚
â”‚ updated_by      â”‚              â”‚ updated_at      â”‚           â”‚ created_by      â”‚
â”‚ is_deleted      â”‚              â”‚ created_by      â”‚           â”‚ updated_by      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚ updated_by      â”‚           â”‚ is_deleted      â”‚
                                 â”‚ is_deleted      â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              è®¢å•ä¸æ”¯ä»˜ç®¡ç†                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    Customer (å®¢æˆ·)                Order (è®¢å•)                 OrderItem (è®¢å•é¡¹)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ customer_id(PK) â”‚â”€â”€â”€â”€â”€1:Nâ”€â”€â”€â”€â”€â”‚ order_id (PK)   â”‚â”€â”€1:Nâ”€â”€â”€â”€â”€â”‚ order_item_id(PK)â”‚
â”‚ store_id (FK)   â”‚              â”‚ store_id (FK)   â”‚           â”‚ order_id (FK)   â”‚
â”‚ customer_name   â”‚              â”‚ customer_id(FK) â”‚           â”‚ product_id (FK) â”‚
â”‚ phone           â”‚              â”‚ user_id (FK)    â”‚           â”‚ quantity        â”‚
â”‚ email           â”‚              â”‚ order_number    â”‚           â”‚ unit_price      â”‚
â”‚ points_balance  â”‚              â”‚ idempotency_key â”‚           â”‚ subtotal        â”‚
â”‚ membership_levelâ”‚              â”‚ total_amount    â”‚           â”‚ created_at      â”‚
â”‚ created_at      â”‚              â”‚ tax_amount      â”‚           â”‚ created_by      â”‚
â”‚ updated_at      â”‚              â”‚ tip_amount      â”‚           â”‚ updated_at      â”‚
â”‚ created_by      â”‚              â”‚ discount_amount â”‚           â”‚ updated_by      â”‚
â”‚ updated_by      â”‚              â”‚ payment_status  â”‚           â”‚ is_deleted      â”‚
â”‚ is_deleted      â”‚              â”‚ order_status    â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚ order_type      â”‚
                                 â”‚ created_at      â”‚           Payment (æ”¯ä»˜)
    Coupon (ä¼˜æƒ åˆ¸)               â”‚ updated_at      â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚ created_by      â”‚â”€â”€1:Nâ”€â”€â”€â”€â”€â”‚ payment_id (PK) â”‚
â”‚ coupon_id (PK)  â”‚â”€â”€N:Mâ”€â”€â”€â”€â”€â”€â”€â”€â”‚ updated_by      â”‚           â”‚ order_id (FK)   â”‚
â”‚ store_id (FK)   â”‚              â”‚ completed_at    â”‚           â”‚ idempotency_key â”‚
â”‚ coupon_code     â”‚              â”‚ is_deleted      â”‚           â”‚ payment_method  â”‚
â”‚ discount_type   â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚ amount          â”‚
â”‚ discount_value  â”‚                                            â”‚ transaction_id  â”‚
â”‚ min_order_amountâ”‚              OrderCoupon (å…³è”è¡¨)          â”‚ status          â”‚
â”‚ valid_from      â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚ processed_at    â”‚
â”‚ valid_until     â”‚              â”‚ order_id (FK)   â”‚           â”‚ created_at      â”‚
â”‚ usage_limit     â”‚              â”‚ coupon_id (FK)  â”‚           â”‚ updated_at      â”‚
â”‚ used_count      â”‚              â”‚ discount_appliedâ”‚           â”‚ created_by      â”‚
â”‚ is_active       â”‚              â”‚ created_at      â”‚           â”‚ updated_by      â”‚
â”‚ created_at      â”‚              â”‚ created_by      â”‚           â”‚ is_deleted      â”‚
â”‚ updated_at      â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ created_by      â”‚
â”‚ updated_by      â”‚
â”‚ is_deleted      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              è€ƒå‹¤ä¸ä¼šè¯ç®¡ç†                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    Attendance (è€ƒå‹¤)              UserSession (ç”¨æˆ·ä¼šè¯)       Closing (äº¤ç­è®°å½•)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ attendance_id(PK)â”‚              â”‚ session_id (PK) â”‚           â”‚ closing_id (PK) â”‚
â”‚ user_id (FK)    â”‚              â”‚ user_id (FK)    â”‚           â”‚ user_id (FK)    â”‚
â”‚ store_id (FK)   â”‚              â”‚ device_id (FK)  â”‚           â”‚ store_id (FK)   â”‚
â”‚ clock_in_time   â”‚              â”‚ token_hash      â”‚           â”‚ closing_date    â”‚
â”‚ clock_out_time  â”‚              â”‚ expires_at      â”‚           â”‚ cash_counted    â”‚
â”‚ total_hours     â”‚              â”‚ is_active       â”‚           â”‚ cash_expected   â”‚
â”‚ idempotency_key â”‚              â”‚ created_at      â”‚           â”‚ difference      â”‚
â”‚ sync_status     â”‚              â”‚ updated_at      â”‚           â”‚ sync_status     â”‚
â”‚ created_at      â”‚              â”‚ last_activity   â”‚           â”‚ created_at      â”‚
â”‚ updated_at      â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚ updated_at      â”‚
â”‚ created_by      â”‚                                            â”‚ created_by      â”‚
â”‚ updated_by      â”‚              Receipt (æ”¶æ®è®°å½•)             â”‚ updated_by      â”‚
â”‚ is_deleted      â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚ is_deleted      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚ receipt_id (PK) â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚ order_id (FK)   â”‚
                                 â”‚ delivery_method â”‚
                                 â”‚ recipient       â”‚
                                 â”‚ sent_at         â”‚
                                 â”‚ status          â”‚
                                 â”‚ created_at      â”‚
                                 â”‚ updated_at      â”‚
                                 â”‚ created_by      â”‚
                                 â”‚ updated_by      â”‚
                                 â”‚ is_deleted      â”‚
                                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              ç³»ç»Ÿç®¡ç†ä¸é…ç½®                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    Device (è®¾å¤‡)                  DeviceCode (æ¿€æ´»ç )          TaxRule (ç¨åŠ¡è§„åˆ™)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ device_id (PK)  â”‚â”€â”€â”€â”€â”€1:Nâ”€â”€â”€â”€â”€â”‚device_code_id(PK)â”‚          â”‚ tax_rule_id(PK) â”‚
â”‚ store_id (FK)   â”‚              â”‚ device_code(8ä½) â”‚           â”‚ store_id (FK)   â”‚
â”‚ device_name     â”‚              â”‚ device_id (FK)  â”‚           â”‚ tax_name        â”‚
â”‚ device_type     â”‚              â”‚device_fingerprintâ”‚          â”‚ tax_rate        â”‚
â”‚ mac_address     â”‚              â”‚ status(VARCHAR) â”‚           â”‚ tax_type        â”‚
â”‚ ip_address      â”‚              â”‚activation_attemptsâ”‚         â”‚ applicable_to   â”‚
â”‚ last_online     â”‚              â”‚ max_attempts    â”‚           â”‚ effective_from  â”‚
â”‚ status          â”‚              â”‚ issued_at       â”‚           â”‚ effective_until â”‚
â”‚ registered_at   â”‚              â”‚ expired_at      â”‚           â”‚ is_active       â”‚
â”‚ created_at      â”‚              â”‚ bound_at        â”‚           â”‚ created_at      â”‚
â”‚ updated_at      â”‚              â”‚ created_at      â”‚           â”‚ updated_at      â”‚
â”‚ created_by      â”‚              â”‚ updated_at      â”‚           â”‚ created_by      â”‚
â”‚ updated_by      â”‚              â”‚ created_by      â”‚           â”‚ updated_by      â”‚
â”‚ is_deleted      â”‚              â”‚ updated_by      â”‚           â”‚ is_deleted      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚ is_deleted      â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                Notification (é€šçŸ¥)
                                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                â”‚notification_id  â”‚
                                â”‚ (PK)            â”‚
                                â”‚ store_id (FK)   â”‚
                                â”‚ user_id (FK)    â”‚
                                â”‚ title           â”‚
                                â”‚ message         â”‚
                                â”‚ type            â”‚
                                â”‚ is_read         â”‚
                                â”‚ created_at      â”‚
                                â”‚ updated_at      â”‚
                                â”‚ created_by      â”‚
                                â”‚ updated_by      â”‚
                                â”‚ read_at         â”‚
                                â”‚ is_deleted      â”‚
                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              æŠ¥è¡¨ä¸æ±‡æ€»è¡¨(åèŒƒå¼åŒ–)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    DailySalesReport (æ—¥é”€å”®æ±‡æ€»)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ report_id (PK)          â”‚ ç”¨äºå¿«é€Ÿç”ŸæˆDashboardæŠ¥è¡¨            â”‚
â”‚ store_id (FK)           â”‚ é¿å…å¤æ‚çš„å®æ—¶ç»Ÿè®¡æŸ¥è¯¢               â”‚
â”‚ report_date             â”‚ æ¯æ—¥å®šæ—¶ä»»åŠ¡æ›´æ–°                     â”‚
â”‚ total_sales_amount      â”‚                                      â”‚
â”‚ total_orders            â”‚                                      â”‚
â”‚ average_order_value     â”‚                                      â”‚
â”‚ total_tips              â”‚                                      â”‚
â”‚ top_product_id          â”‚                                      â”‚
â”‚ created_at              â”‚                                      â”‚
â”‚ updated_at              â”‚                                      â”‚
â”‚ created_by              â”‚                                      â”‚
â”‚ updated_by              â”‚                                      â”‚
â”‚ is_deleted              â”‚                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## DashboardåŠŸèƒ½å®ç°æ˜ å°„

åŸºäºDashboardåå°ç®¡ç†éœ€æ±‚ï¼Œä»¥ä¸‹æ˜¯å„åŠŸèƒ½æ¨¡å—ä¸æ•°æ®åº“è¡¨çš„å¯¹åº”å…³ç³»ï¼š

### ğŸ” ç™»å½•/æ³¨å†Œé¡µ
- **ç®¡ç†å‘˜é‚®ç®±/å¯†ç ç™»å½•**: `User`è¡¨ - emailã€password_hashå­—æ®µ
- **å¿˜è®°å¯†ç **: `User`è¡¨ - å¯æ‰©å±•é‡ç½®ä»¤ç‰Œå­—æ®µ
- **éªŒè¯ç ç™»å½•**: `User`è¡¨ - å¯æ‰©å±•éªŒè¯ç ç›¸å…³å­—æ®µ

### ğŸ“Š é¦–é¡µï¼ˆæ¦‚è§ˆ Dashboardï¼‰
- **æ˜¨æ—¥/æœ¬å‘¨é”€å”®é¢**: `DailySalesReport`è¡¨ - total_sales_amountå­—æ®µæ±‡æ€»
- **å®¢å•ä»·**: `DailySalesReport`è¡¨ - average_order_valueå­—æ®µ
- **å°è´¹ç»Ÿè®¡**: `DailySalesReport`è¡¨ - total_tipså­—æ®µ
- **çƒ­é—¨å•†å“**: `DailySalesReport`è¡¨ - top_product_idå…³è”Productè¡¨
- **æŠ¥è¡¨è¿‡æ»¤**: é€šè¿‡store_idå’Œreport_dateç­›é€‰

### ğŸª åº—é“ºç®¡ç†é¡µ
- **è¥ä¸šæ—¶é—´**: `Store`è¡¨ - business_hourså­—æ®µ(JSONæ ¼å¼)
- **åœ°å€ä¿¡æ¯**: `Store`è¡¨ - addresså­—æ®µ
- **ç¨ç‡è®¾ç½®**: `Store`è¡¨ - tax_rateå­—æ®µ
- **å¸ç§è®¾ç½®**: `Store`è¡¨ - currencyå­—æ®µ
- **æ—¶åŒºè®¾ç½®**: `Store`è¡¨ - timezoneå­—æ®µ

### ğŸ½ï¸ èœå•ç®¡ç†é¡µ
- **åˆ†ç±»ç®¡ç†**: `Category`è¡¨ - category_nameã€display_orderã€is_active
- **èœå“ç®¡ç†**: `Product`è¡¨ - product_nameã€descriptionã€priceã€image_url
- **ä»·æ ¼è®¾ç½®**: `Product`è¡¨ - priceå­—æ®µ
- **åº“å­˜ç®¡ç†**: `Inventory`è¡¨ - current_stockã€min_stockã€max_stock
- **å›¾ç‰‡ä¸Šä¼ **: `Product`è¡¨ - image_urlå­—æ®µå­˜å‚¨å›¾ç‰‡è·¯å¾„
- **åº“å­˜ä¸è¶³æé†’**: é€šè¿‡Inventoryè¡¨çš„min_stocké˜ˆå€¼åˆ¤æ–­

### ğŸ‘¥ å‘˜å·¥ç®¡ç†é¡µ
- **å‘˜å·¥åˆ—è¡¨**: `User`è¡¨ - åŸºæœ¬ä¿¡æ¯å±•ç¤º
- **æƒé™ç®¡ç†**: `Role`ã€`Permission`ã€`UserRole`ã€`RolePermission`è¡¨ç»„åˆ
- **è–ªèµ„ç®¡ç†**: `User`è¡¨ - salaryå­—æ®µ
- **æ‰“å¡è®°å½•**: å¯æ‰©å±•`Attendance`è¡¨(æœªåœ¨å½“å‰è®¾è®¡ä¸­)

### ğŸ“ˆ æŠ¥è¡¨é¡µ
- **é”€å”®é¢è¶‹åŠ¿**: `Order`è¡¨æŒ‰æ—¶é—´ç»´åº¦ç»Ÿè®¡total_amount
- **å“ç±»é”€é‡**: `OrderItem`å…³è”`Product`å’Œ`Category`ç»Ÿè®¡
- **æ¯›åˆ©åˆ†æ**: `OrderItem`çš„unit_priceä¸`Inventory`çš„cost_priceè®¡ç®—
- **è‡ªå®šä¹‰æ—¶é—´èŒƒå›´**: é€šè¿‡Orderè¡¨çš„created_atå­—æ®µç­›é€‰

### ğŸ‘¤ å®¢æˆ·/ä¼šå‘˜ç®¡ç†é¡µ
- **å®¢æˆ·åˆ—è¡¨**: `Customer`è¡¨ - åŸºæœ¬ä¿¡æ¯ç®¡ç†
- **ç§¯åˆ†ç³»ç»Ÿ**: `Customer`è¡¨ - points_balanceå­—æ®µ
- **ä¼˜æƒ åˆ¸ç®¡ç†**: `Coupon`è¡¨ - ä¼˜æƒ åˆ¸åˆ›å»ºå’Œç®¡ç†
- **ç¤¼å“å¡**: å¯æ‰©å±•`GiftCard`è¡¨(æœªåœ¨å½“å‰è®¾è®¡ä¸­)
- **å‘æ”¾ä¼˜æƒ åˆ¸**: é€šè¿‡Couponè¡¨åˆ›å»ºï¼ŒOrderCouponè¡¨è®°å½•ä½¿ç”¨

### ğŸ’° æ”¯ä»˜ä¸ç»“ç®—é¡µ
- **æ”¯ä»˜è®°å½•**: `Payment`è¡¨ - è®°å½•æ‰€æœ‰æ”¯ä»˜ä¿¡æ¯
- **ç»“ç®—è´¦æˆ·**: å¯æ‰©å±•`SettlementAccount`è¡¨(æœªåœ¨å½“å‰è®¾è®¡ä¸­)
- **ç»“ç®—å‘¨æœŸ**: é€šè¿‡Paymentè¡¨çš„processed_atå­—æ®µæŒ‰å‘¨æœŸç»Ÿè®¡
- **æ‰‹ç»­è´¹æ˜ç»†**: Paymentè¡¨å¯æ‰©å±•fee_amountå­—æ®µ
- **å¯¹è´¦åŠŸèƒ½**: åˆ©ç”¨Paymentè¡¨çš„transaction_idå’Œidempotency_key

### ğŸ“± è®¾å¤‡ç®¡ç†é¡µ
- **POSç»ˆç«¯åˆ—è¡¨**: `Device`è¡¨ - è®¾å¤‡ä¿¡æ¯ç®¡ç†
- **è®¾å¤‡çŠ¶æ€**: `Device`è¡¨ - statusã€last_onlineå­—æ®µ
- **è®¾å¤‡ç»‘å®š**: `Device`è¡¨ - mac_addressã€ip_addresså­—æ®µ
- **è®¾å¤‡æ¿€æ´»**: `DeviceCode`è¡¨ - Squareé£æ ¼æ¿€æ´»ç ç®¡ç†ï¼Œ6-8ä½çŸ­ç 
- **æ¿€æ´»ç çŠ¶æ€**: `DeviceCode`è¡¨ - statuså­—æ®µ(UNUSED/BOUND/EXPIRED)
- **è®¾å¤‡æŒ‡çº¹**: `DeviceCode`è¡¨ - device_fingerprintå­—æ®µå­˜å‚¨è®¾å¤‡å”¯ä¸€æ ‡è¯†
- **æ¿€æ´»å°è¯•**: `DeviceCode`è¡¨ - activation_attemptså­—æ®µè®°å½•å°è¯•æ¬¡æ•°ï¼Œæœ€å¤§3æ¬¡
- **å³æ—¶æ¿€æ´»**: ç”¨æˆ·è¾“å…¥æ¿€æ´»ç è‡ªåŠ©ç»‘å®šè®¾å¤‡ï¼Œä¸€è®¾å¤‡ä¸€æœ‰æ•ˆç 
- **è®¾å¤‡ç§»é™¤**: é€šè¿‡is_deletedè½¯åˆ é™¤

### ğŸ§¾ ç¨åŠ¡è®¾ç½®é¡µ
- **ç¨åŠ¡è§„åˆ™**: `TaxRule`è¡¨ - ç¨ç‡å’Œé€‚ç”¨è§„åˆ™ç®¡ç†
- **å·ç¨/å¸‚ç¨**: `TaxRule`è¡¨ - tax_typeå­—æ®µåŒºåˆ†
- **ç”Ÿæ•ˆæ—¶é—´**: `TaxRule`è¡¨ - effective_fromã€effective_untilå­—æ®µ

### ğŸ”” é€šçŸ¥/æ¶ˆæ¯ä¸­å¿ƒé¡µ
- **ç³»ç»Ÿå…¬å‘Š**: `Notification`è¡¨ - typeå­—æ®µæ ‡è¯†å…¬å‘Šç±»å‹
- **è®¾å¤‡å¼‚å¸¸æé†’**: `Notification`è¡¨ - å…³è”Deviceè¡¨å¼‚å¸¸çŠ¶æ€
- **æ¶ˆæ¯çŠ¶æ€**: `Notification`è¡¨ - is_readã€read_atå­—æ®µ
- **æ¶ˆæ¯è¯¦æƒ…**: `Notification`è¡¨ - titleã€messageå­—æ®µ

### ğŸ”’ æƒé™ç³»ç»Ÿå®ç°
- **è§’è‰²å®šä¹‰**: `Role`è¡¨ - role_nameã€role_code
- **æƒé™å®šä¹‰**: `Permission`è¡¨ - resourceã€actionç²¾ç¡®æ§åˆ¶
- **ç”¨æˆ·è§’è‰²**: `UserRole`è¡¨ - å¤šå¯¹å¤šå…³ç³»å®ç°
- **è§’è‰²æƒé™**: `RolePermission`è¡¨ - çµæ´»æƒé™ç»„åˆ
- **æƒé™éªŒè¯**: é€šè¿‡ç”¨æˆ·â†’è§’è‰²â†’æƒé™çš„é“¾å¼æŸ¥è¯¢

### ğŸ›¡ï¸ æ•°æ®å®‰å…¨ä¸å®¡è®¡
- **æ“ä½œå®¡è®¡**: æ‰€æœ‰è¡¨çš„created_byã€updated_byå­—æ®µ
- **æ•°æ®ä¿æŠ¤**: æ‰€æœ‰è¡¨çš„is_deletedè½¯åˆ é™¤
- **å¹‚ç­‰æ€§**: Orderã€Paymentè¡¨çš„idempotency_keyé˜²é‡å¤
- **æ•°æ®è¿½è¸ª**: ç»Ÿä¸€çš„æ—¶é—´æˆ³å­—æ®µcreated_atã€updated_at

## iPad POS API æ•°æ®åº“æ”¯æŒåˆ†æ

åŸºäºiPad POS Appçš„APIéœ€æ±‚ï¼Œä»¥ä¸‹æ˜¯å½“å‰æ•°æ®åº“è®¾è®¡çš„æ”¯æŒæƒ…å†µå’Œæ”¹è¿›å»ºè®®ï¼š

### âœ… **å®Œå…¨æ”¯æŒçš„APIåŠŸèƒ½**

#### 3. å•†å“/èœå•
- **GET /products**: `Product`è¡¨å®Œæ•´æ”¯æŒ
- **GET /categories**: `Category`è¡¨å®Œæ•´æ”¯æŒ  
- **ç¦»çº¿ç¼“å­˜**: `updated_at`å­—æ®µæ”¯æŒå¢é‡åŒæ­¥
- **åº“å­˜ç®¡ç†**: `Inventory`è¡¨æ”¯æŒåº“å­˜æŸ¥è¯¢

#### 4. è´­ç‰©è½¦/è®¢å•
- **POST /orders**: `Order`è¡¨æœ‰`idempotency_key`é˜²é‡å¤
- **PUT /orders/{id}**: `OrderItem`è¡¨æ”¯æŒè®¢å•æ›´æ–°
- **GET /orders/{id}**: å®Œæ•´çš„è®¢å•æŸ¥è¯¢æ”¯æŒ
- **ç¦»çº¿åŒæ­¥**: å¹‚ç­‰æ€§è®¾è®¡æ”¯æŒæ‰¹é‡ä¸Šä¼ 

#### 5. æ”¯ä»˜
- **POST /payments**: `Payment`è¡¨æœ‰`idempotency_key`
- **GET /payments/{id}**: æ”¯ä»˜çŠ¶æ€æŸ¥è¯¢æ”¯æŒ
- **POST /refunds**: é€šè¿‡PaymentçŠ¶æ€ç®¡ç†é€€æ¬¾

#### 7. å†å²è®¢å•
- **GET /orders?date=...**: `Order`è¡¨`created_at`ç´¢å¼•æ”¯æŒ

#### 8. æ—¥ç»“/äº¤ç­ (éƒ¨åˆ†æ”¯æŒ)
- **GET /reports/daily-sales**: `DailySalesReport`è¡¨æ”¯æŒ
- **POST /closing**: âœ… æ–°å¢`Closing`è¡¨æ”¯æŒ

#### 9. è®¾ç½®/ç¡¬ä»¶
- **GET /settings**: `Store`è¡¨æ”¯æŒé—¨åº—é…ç½®
- **POST /devices/register**: `Device`è¡¨å®Œæ•´æ”¯æŒ

### ğŸŸ¡ **éœ€è¦å­—æ®µæ‰©å±•çš„åŠŸèƒ½**

#### 1. ç™»å½•/ç”¨æˆ·
- **POST /auth/login**: âœ… éœ€è¦åœ¨`User`è¡¨æ·»åŠ `pin_hash`å­—æ®µ
- **GET /auth/me**: âœ… æ–°å¢`UserSession`è¡¨æ”¯æŒå¤šè®¾å¤‡ç™»å½•
- **ç¦»çº¿ç™»å½•**: UserSessionè¡¨æ”¯æŒæœ¬åœ°ç¼“å­˜

#### 6. æ”¶æ®/æ‰“å°
- **POST /receipts**: âœ… æ–°å¢`Receipt`è¡¨è®°å½•æ”¶æ®å‘é€

### ğŸ†• **éœ€è¦æ–°å¢çš„è¡¨**

#### 2. æ‰“å¡/è€ƒå‹¤
- **POST /attendance/clock-in**: âœ… æ–°å¢`Attendance`è¡¨
- **POST /attendance/clock-out**: Attendanceè¡¨æ”¯æŒ
- **ç¦»çº¿æ‰“å¡**: `sync_status`å­—æ®µæ”¯æŒç¦»çº¿åŒæ­¥

### ğŸ“‹ **æ–°å¢è¡¨è®¾è®¡è¦ç‚¹**

#### Attendance (è€ƒå‹¤è¡¨)
- **idempotency_key**: é˜²æ­¢é‡å¤æ‰“å¡ä¸Šä¼ 
- **sync_status**: æ”¯æŒç¦»çº¿æ‰“å¡åŒæ­¥
- **clock_in_time/clock_out_time**: ç²¾ç¡®è®°å½•æ‰“å¡æ—¶é—´

#### UserSession (ç”¨æˆ·ä¼šè¯è¡¨)  
- **token_hash**: æ”¯æŒå¤šè®¾å¤‡ç™»å½•
- **device_id**: å…³è”å…·ä½“è®¾å¤‡
- **expires_at**: ä¼šè¯è¿‡æœŸç®¡ç†

#### Closing (äº¤ç­è®°å½•è¡¨)
- **cash_counted/cash_expected**: ç°é‡‘ç›˜ç‚¹
- **difference**: å·®é¢è®°å½•
- **sync_status**: æ”¯æŒç¦»çº¿äº¤ç­

#### Receipt (æ”¶æ®è®°å½•è¡¨)
- **delivery_method**: print/sms/email
- **recipient**: æ”¶æ®æ¥æ”¶æ–¹
- **status**: å‘é€çŠ¶æ€è·Ÿè¸ª

### ğŸ”’ **å…³é”®è®¾è®¡åŸåˆ™**

1. **å¹‚ç­‰æ€§ä¼˜å…ˆ**: æ‰€æœ‰å…³é”®æ“ä½œè¡¨éƒ½æœ‰`idempotency_key`
2. **ç¦»çº¿åŒæ­¥**: æ–°å¢`sync_status`å­—æ®µç®¡ç†åŒæ­¥çŠ¶æ€  
3. **æ•°æ®å®Œæ•´æ€§**: ä¿æŒç°æœ‰å®¡è®¡å­—æ®µæ ‡å‡†
4. **å‘åå…¼å®¹**: æ–°å¢è¡¨ä¸å½±å“ç°æœ‰DashboardåŠŸèƒ½

## å®ä½“å…³ç³»è¯´æ˜

### æ ¸å¿ƒå®ä½“

#### 1. ç§Ÿæˆ·ä¸ç”¨æˆ·ç®¡ç†æ¨¡å—
- **Store (åº—é“º)**: å¤šç§Ÿæˆ·æ¶æ„çš„æ ¸å¿ƒï¼Œæ‰€æœ‰ä¸šåŠ¡æ•°æ®éƒ½ä»¥åº—é“ºä¸ºéš”ç¦»å•ä½
- **User (ç”¨æˆ·/å‘˜å·¥)**: ç³»ç»Ÿç”¨æˆ·ï¼ŒåŒ…æ‹¬ç®¡ç†å‘˜ã€å‘˜å·¥ç­‰ï¼Œé€šè¿‡store_idå®ç°ç§Ÿæˆ·éš”ç¦»
- **Role (è§’è‰²)**: æƒé™è§’è‰²å®šä¹‰ï¼Œæ”¯æŒçµæ´»çš„æƒé™ç®¡ç†ï¼Œä½¿ç”¨role_codeä¾¿äºç¨‹åºåˆ¤æ–­
- **Permission (æƒé™)**: ç»†ç²’åº¦æƒé™å®šä¹‰ï¼Œé€šè¿‡resourceå’Œactionå®ç°ç²¾ç¡®æƒé™æ§åˆ¶
- **UserRole (ç”¨æˆ·è§’è‰²å…³è”)**: å¤šå¯¹å¤šå…³ç³»ï¼Œæ”¯æŒä¸€ä¸ªç”¨æˆ·æ‹¥æœ‰å¤šä¸ªè§’è‰²
- **RolePermission (è§’è‰²æƒé™å…³è”)**: å¤šå¯¹å¤šå…³ç³»ï¼Œå®ç°è§’è‰²ä¸æƒé™çš„çµæ´»ç»„åˆ

#### 2. å•†å“ä¸åº“å­˜ç®¡ç†æ¨¡å—
- **Category (å•†å“åˆ†ç±»)**: å•†å“åˆ†ç±»ç®¡ç†ï¼Œæ”¯æŒå±‚çº§ç»“æ„
- **Product (å•†å“)**: å•†å“ä¸»è¡¨ï¼ŒåŒ…å«åŸºæœ¬ä¿¡æ¯å’Œä»·æ ¼
- **Inventory (åº“å­˜)**: å•†å“åº“å­˜ç®¡ç†ï¼Œä¸å•†å“ä¸€å¯¹ä¸€å…³ç³»ï¼Œç‹¬ç«‹ç®¡ç†åº“å­˜æ•°æ®

#### 3. è®¢å•ä¸æ”¯ä»˜ç®¡ç†æ¨¡å—
- **Customer (å®¢æˆ·)**: å®¢æˆ·ä¿¡æ¯ç®¡ç†ï¼Œæ”¯æŒä¼šå‘˜ç§¯åˆ†
- **Order (è®¢å•)**: è®¢å•ä¸»è¡¨ï¼Œè®°å½•è®¢å•åŸºæœ¬ä¿¡æ¯å’ŒçŠ¶æ€
- **OrderItem (è®¢å•é¡¹)**: è®¢å•æ˜ç»†ï¼Œè®°å½•æ¯ä¸ªå•†å“çš„è´­ä¹°ä¿¡æ¯
- **Payment (æ”¯ä»˜)**: æ”¯ä»˜è®°å½•ï¼Œæ”¯æŒå¤šç§æ”¯ä»˜æ–¹å¼å’Œåˆ†æœŸæ”¯ä»˜
- **Coupon (ä¼˜æƒ åˆ¸)**: ä¼˜æƒ åˆ¸ç®¡ç†
- **OrderCoupon (è®¢å•ä¼˜æƒ åˆ¸å…³è”)**: è®°å½•è®¢å•ä½¿ç”¨çš„ä¼˜æƒ åˆ¸

#### 4. ç³»ç»Ÿç®¡ç†ä¸é…ç½®æ¨¡å—
- **Device (è®¾å¤‡)**: POSç»ˆç«¯è®¾å¤‡ç®¡ç†
- **DeviceCode (æ¿€æ´»ç )**: Squareé£æ ¼è®¾å¤‡æ¿€æ´»ç ç®¡ç†ï¼Œæ”¯æŒ6-8ä½çŸ­ç å³æ—¶æ¿€æ´»
- **TaxRule (ç¨åŠ¡è§„åˆ™)**: ç¨åŠ¡é…ç½®ç®¡ç†ï¼Œæ”¯æŒå¤æ‚ç¨åŠ¡åœºæ™¯
- **Notification (é€šçŸ¥)**: ç³»ç»Ÿé€šçŸ¥æ¶ˆæ¯ç®¡ç†

#### 5. æŠ¥è¡¨ä¸æ±‡æ€»æ¨¡å—
- **DailySalesReport (æ—¥é”€å”®æ±‡æ€»)**: åèŒƒå¼åŒ–è®¾è®¡ï¼Œæå‡æŠ¥è¡¨æŸ¥è¯¢æ€§èƒ½

### å…³é”®å…³ç³»

#### ä¸€å¯¹å¤šå…³ç³» (1:N)
- Store â†’ User: ä¸€ä¸ªåº—é“ºæœ‰å¤šä¸ªå‘˜å·¥
- Store â†’ Product: ä¸€ä¸ªåº—é“ºæœ‰å¤šä¸ªå•†å“
- Store â†’ Customer: ä¸€ä¸ªåº—é“ºæœ‰å¤šä¸ªå®¢æˆ·
- Category â†’ Product: ä¸€ä¸ªåˆ†ç±»åŒ…å«å¤šä¸ªå•†å“
- Customer â†’ Order: ä¸€ä¸ªå®¢æˆ·å¯ä»¥æœ‰å¤šä¸ªè®¢å•
- Order â†’ OrderItem: ä¸€ä¸ªè®¢å•åŒ…å«å¤šä¸ªå•†å“é¡¹
- Order â†’ Payment: ä¸€ä¸ªè®¢å•å¯èƒ½æœ‰å¤šæ¬¡æ”¯ä»˜è®°å½•

#### ä¸€å¯¹ä¸€å…³ç³» (1:1)
- Product â†” Inventory: å•†å“ä¸åº“å­˜ä¸€å¯¹ä¸€å…³ç³»

#### å¤šå¯¹å¤šå…³ç³» (N:M)
- User â†” Role: é€šè¿‡UserRoleè¡¨å®ç°ï¼Œç”¨æˆ·å¯ä»¥æœ‰å¤šä¸ªè§’è‰²
- Role â†” Permission: é€šè¿‡RolePermissionè¡¨å®ç°ï¼Œè§’è‰²å¯ä»¥æœ‰å¤šä¸ªæƒé™
- Order â†” Coupon: é€šè¿‡OrderCouponè¡¨å®ç°ï¼Œè®¢å•å¯ä»¥ä½¿ç”¨å¤šå¼ ä¼˜æƒ åˆ¸

### è®¾è®¡ç‰¹ç‚¹

#### 1. å¤šç§Ÿæˆ·æ¶æ„
- æ‰€æœ‰ä¸šåŠ¡è¡¨éƒ½åŒ…å«store_idå­—æ®µï¼Œå®ç°æ•°æ®éš”ç¦»
- é€šè¿‡åº”ç”¨å±‚å’Œæ•°æ®åº“çº¦æŸç¡®ä¿ç§Ÿæˆ·é—´æ•°æ®å®‰å…¨

#### 2. æ•°æ®å®Œæ•´æ€§ä¿éšœ
- ä½¿ç”¨è‡ªå¢ä¸»é”®ç¡®ä¿å”¯ä¸€æ€§
- åˆç†è®¾ç½®å¤–é”®çº¦æŸä¿è¯å¼•ç”¨å®Œæ•´æ€§
- è´¢åŠ¡ç›¸å…³å­—æ®µä½¿ç”¨DECIMALç±»å‹é¿å…ç²¾åº¦é—®é¢˜

#### 3. æ€§èƒ½ä¼˜åŒ–è€ƒè™‘
- åˆ›å»ºDailySalesReportæ±‡æ€»è¡¨ï¼Œé¿å…å¤æ‚çš„å®æ—¶ç»Ÿè®¡æŸ¥è¯¢
- ä¸ºé«˜é¢‘æŸ¥è¯¢å­—æ®µè®¾è®¡å¤åˆç´¢å¼•
- è€ƒè™‘è®¢å•è¡¨æŒ‰æ—¶é—´åˆ†åŒºæå‡æŸ¥è¯¢æ•ˆç‡

#### 4. æ‰©å±•æ€§è®¾è®¡
- é¢„ç•™çŠ¶æ€å­—æ®µæ”¯æŒä¸šåŠ¡æµç¨‹æ‰©å±•
- ä½¿ç”¨JSONå­—æ®µå­˜å‚¨çµæ´»é…ç½®ä¿¡æ¯
- è½¯åˆ é™¤è®¾è®¡ä¿æŠ¤é‡è¦å†å²æ•°æ®

#### 5. å®¡è®¡è¿½è¸ªä¸æ•°æ®å®‰å…¨
- **ç»Ÿä¸€å®¡è®¡å­—æ®µ**: æ‰€æœ‰è¡¨åŒ…å«created_atã€updated_atã€created_byã€updated_byæ—¶é—´æˆ³å’Œæ“ä½œäººå‘˜ä¿¡æ¯
- **è½¯åˆ é™¤è®¾è®¡**: ä½¿ç”¨is_deletedå­—æ®µä¿æŠ¤é‡è¦å†å²æ•°æ®ï¼Œé¿å…ç‰©ç†åˆ é™¤
- **å¹‚ç­‰æ€§ä¿éšœ**: Orderå’ŒPaymentè¡¨åŒ…å«idempotency_keyå­—æ®µï¼Œé˜²æ­¢é‡å¤æäº¤å’Œå›è°ƒå¤„ç†
- **æ•°æ®å˜æ›´è¿½è¸ª**: æ”¯æŒå®Œæ•´çš„æ•°æ®å˜æ›´å†å²è®°å½•

#### 6. æƒé™ç³»ç»Ÿè®¾è®¡
- **ç»†ç²’åº¦æƒé™æ§åˆ¶**: Permissionè¡¨é€šè¿‡resourceå’Œactionå­—æ®µå®ç°ç²¾ç¡®çš„æƒé™å®šä¹‰
- **çµæ´»çš„è§’è‰²ç®¡ç†**: Role-Permissionå¤šå¯¹å¤šå…³ç³»ï¼Œæ”¯æŒæƒé™çš„çµæ´»ç»„åˆ
- **æƒé™ç»§æ‰¿**: ç”¨æˆ·é€šè¿‡UserRoleå…³è”è·å¾—è§’è‰²æƒé™ï¼Œæ”¯æŒå¤šè§’è‰²å¹¶å­˜
- **æƒé™å®¡è®¡**: æƒé™åˆ†é…å’Œæ’¤é”€éƒ½æœ‰å®Œæ•´çš„æ“ä½œè®°å½•

#### 7. äº‹åŠ¡å®‰å…¨è®¾è®¡
- **æ”¯ä»˜å¹‚ç­‰æ€§**: Paymentè¡¨çš„idempotency_keyç¡®ä¿æ”¯ä»˜æ“ä½œçš„å¹‚ç­‰æ€§
- **è®¢å•ä¸€è‡´æ€§**: Orderè¡¨çš„idempotency_keyé˜²æ­¢é‡å¤ä¸‹å•
- **çŠ¶æ€ç®¡ç†**: è®¢å•å’Œæ”¯ä»˜çŠ¶æ€çš„ä¸¥æ ¼æ§åˆ¶ï¼Œç¡®ä¿ä¸šåŠ¡æµç¨‹çš„æ­£ç¡®æ€§
- **å›æ»šæ”¯æŒ**: è½¯åˆ é™¤è®¾è®¡æ”¯æŒä¸šåŠ¡æ“ä½œçš„å®‰å…¨å›æ»š
